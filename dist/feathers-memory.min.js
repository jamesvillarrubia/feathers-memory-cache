!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.memory=t():(e.feathers=e.feathers||{},e.feathers.memory=t())}(window,(function(){return t=[function(e,t,r){"use strict";const n=r(6),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),d=()=>1,y=(e,t,r)=>{const n=e[f].get(t);if(n){if(t=n.value,v(e,t)){if(m(e,n),!e[s])return}else r&&(e[p]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},g=e=>{if(e[i]>e[o])for(let r=e[h].tail;e[i]>e[o]&&null!==r;){var t=r.prev;m(e,r),r=t}},m=(e,t)=>{var r;t&&(r=t.value,e[u]&&e[u](r.key,r.value),e[i]-=r.length,e[f].delete(r.key),e[h].removeNode(t))};class b{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const w=(e,t,r,n)=>{let o=r.value;v(e,o)&&(m(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if((e=(e="number"==typeof e?{max:e}:e)||{}).max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;var t=e.length||d;if(this[a]="function"!=typeof t?d:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,g(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,g(this)}get maxAge(){return this[l]}set lengthCalculator(e){(e="function"!=typeof e?d:e)!==this[a]&&(this[a]=e,this[i]=0,this[h].forEach(e=>{e.length=this[a](e.value,e.key),this[i]+=e.length})),g(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let n=this[h].tail;null!==n;){var r=n.prev;w(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[h].head;null!==n;){var r=n.next;w(this,e,n,t),n=r}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(e=>this[u](e.key,e.value)),this[f]=new Map,this[h]=new n,this[i]=0}dump(){return this[h].map(e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,s=this[a](t,e);if(this[f].has(e)){if(s>this[o])return m(this,this[f].get(e)),!1;const a=this[f].get(e).value;return this[u]&&(this[c]||this[u](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),g(this),!0}return(r=new b(e,t,s,n,r)).length>this[o]?(this[u]&&this[u](e,t),!1):(this[i]+=r.length,this[h].unshift(r),this[f].set(e,this[h].head),g(this),!0)}has(e){return!!this[f].has(e)&&(e=this[f].get(e).value,!v(this,e))}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){var e=this[h].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[f].get(e))}load(e){this.reset();var t=Date.now();for(let o=e.length-1;0<=o;o--){var r=e[o],n=r.e||0;0===n?this.set(r.k,r.v):0<(n-=t)&&this.set(r.k,r.v,n)}}prune(){this[f].forEach((e,t)=>y(this,t,!1))}}},function(e,t,r){"use strict";function n(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r}var o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();e.exports={arrayToObject:n,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:u}),r.push(c))}return function(e){for(;1<e.length;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){if(e=e.replace(/\+/g," "),"iso-8859-1"===r)return e.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(e)}catch(t){return e}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",i=0;i<n.length;++i){var s=n.charCodeAt(i);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122?o+=n.charAt(i):s<128?o+=a[s]:s<2048?o+=a[192|s>>6]+a[128|63&s]:s<55296||57344<=s?o+=a[224|s>>12]+a[128|s>>6&63]+a[128|63&s]:(i+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(i)),o+=a[240|s>>18]+a[128|s>>12&63]+a[128|s>>6&63]+a[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,a){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return i(t)&&!i(r)&&(s=n(t,a)),i(t)&&i(r)?(r.forEach((function(r,n){var i;o.call(t,n)?(i=t[n])&&"object"==typeof i&&r&&"object"==typeof r?t[n]=e(i,r,a):t.push(r):t[n]=r})),t):Object.keys(r).reduce((function(t,n){var i=r[n];return o.call(t,n)?t[n]=e(t[n],i,a):t[n]=i,t}),s)}}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){function n(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var n,o;n=e,t=r[o=t],o in n?Object.defineProperty(n,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=r(0);e.exports=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r="string"==typeof(e=o(o({max:500,maxAge:3e5,key:"function"==typeof e.key?e.key:getKey},e),t.get("cache"))).scope?"cache_".concat(e.scope):"cache_Global",n=t.get(r);return t.get("cache_Global")||(n=new i(e),t.set(r,o(o({},n),{},{getKey:getKey}))),n}}},function(e,t,r){var n=(o=r(5)).before,o=o.after;r=r(3);e.exports={cacheBefore:n,cacheAfter:o,cacheSetup:r}},function(e,t,r){function n(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){var n,o;n=e,t=r[o=t],o in n?Object.defineProperty(n,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)}))}}r(0),r(8),r(3);var s=((r=r(11)).purge,r.purgeScope,r.getKey);r.hashCode,e.exports={before:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=a(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o({scope:"Global"},e),1==r.params.$skipCacheHook)return t.abrupt("return",r);t.next=3;break;case 3:return"get"!==r.method&&"find"!==r.method||(i=r.app.get("cache_".concat(e.scope)),n=s(r),(i=JSON.parse(i.get(n)))&&(r.result=i),"find"===r.method&&i&&(r.result=o(o({},i),{},{fromCache:!0}))),"patch"!==r.method&&"update"!==r.method&&"remove"!==r.method||(n=r.app.get("cache_".concat(e.scope)),i=s(r),n.del(i)),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},after:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=a(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o({scope:"Global"},e),1==r.params.$skipCacheHook)return t.abrupt("return",r);t.next=3;break;case 3:return n=r.app.get("cache_".concat(e.scope)),i=s(r),r.result&&(n.set(i,JSON.stringify(r.result)),r.params.cached=!0),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},function(e,t,r){"use strict";function n(e){var t=this;if((t=t instanceof n?t:new n).tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(0<arguments.length)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r,n){if(!(this instanceof o))return new o(e,t,r,n);this.list=n,this.value=e,t?(t.next=this).prev=t:this.prev=null,r?(r.prev=this).next=r:this.next=null}(e.exports=n).Node=o,(n.create=n).prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){var t;e!==this.head&&(e.list&&e.list.removeNode(e),t=this.head,e.list=this,(e.next=t)&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++)},n.prototype.pushNode=function(e){var t;e!==this.tail&&(e.list&&e.list.removeNode(e),t=this.tail,e.list=this,(e.prev=t)&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++)},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)!function(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)!function(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(1<arguments.length)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(1<arguments.length)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&t<o;o--)i=i.prev;for(;null!==i&&e<o;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){(e=e>this.length?this.length-1:e)<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var a=[];for(n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);for((i=null===i?this.tail:i)!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=function(e,t,r){return null===(t=t===e.head?new o(r,null,t,e):new o(r,t,t.next,e)).next&&(e.tail=t),null===t.prev&&(e.head=t),e.length++,t}(this,i,r[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(7)(n)}catch(e){}},function(e,t,r){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},function(e,t,r){"use strict";var n=r(9),o=r(10);r=r(2);e.exports={formats:r,parse:o,stringify:n}},function(e,t,r){"use strict";function n(e,t){c.apply(e,u(t)?t:[t])}function o(e,t,r,a,s,l,c,h,p,d,y,v,g){var m=e;if("function"==typeof c?m=c(t,m):m instanceof Date?m=d(m):"comma"===r&&u(m)&&(m=m.join(",")),null===m){if(a)return l&&!v?l(t,f.encoder,g):t;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||i.isBuffer(m))return l?[y(v?t:l(t,f.encoder,g))+"="+y(l(m,f.encoder,g))]:[y(t)+"="+y(String(m))];var b,w=[];if(void 0===m)return w;b=u(c)?c:(e=Object.keys(m),h?e.sort(h):e);for(var x=0;x<b.length;++x){var O=b[x];s&&null===m[O]||(u(m)?n(w,o(m[O],"function"==typeof r?r(t,O):t,r,a,s,l,c,h,p,d,y,v,g)):n(w,o(m[O],t+(p?"."+O:"["+O+"]"),r,a,s,l,c,h,p,d,y,v,g)))}return w}var i=r(1),a=r(2),s=Object.prototype.hasOwnProperty,l={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,h=Date.prototype.toISOString,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,formatter:a.formatters[a.default],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var r=e,i=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=a.default;if(void 0!==e.format){if(!s.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=a.formatters[r];r=f.filter;return"function"!=typeof e.filter&&!u(e.filter)||(r=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:f).addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:f).charsetSentinel,delimiter:(void 0===e.delimiter?f:e).delimiter,encode:("boolean"==typeof e.encode?e:f).encode,encoder:("function"==typeof e.encoder?e:f).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:f).encodeValuesOnly,filter:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:f).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:f).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:f).strictNullHandling}}(t);"function"==typeof i.filter?r=(0,i.filter)("",r):u(i.filter)&&(p=i.filter);var c=[];if("object"!=typeof r||null===r)return"";e=t&&t.arrayFormat in l?t.arrayFormat:t&&"indices"in t&&!t.indices?"repeat":"indices";var h=l[e],p=p||Object.keys(r);i.sort&&p.sort(i.sort);for(var d=0;d<p.length;++d){var y=p[d];i.skipNulls&&null===r[y]||n(c,o(r[y],y,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}return t=c.join(i.delimiter),e=!0===i.addQueryPrefix?"?":"",i.charsetSentinel&&("iso-8859-1"===i.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}},function(e,t,r){"use strict";function n(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),s=[];if(e=a?n.slice(0,a.index):n){if(!r.plainObjects&&i.call(Object.prototype,e)&&!r.allowPrototypes)return;s.push(e)}for(var l=0;null!==(a=o.exec(n))&&l<r.depth;){if(l+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+n.slice(a.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;0<=o;--o){var i,a,s,l=e[o];"[]"===l&&r.parseArrays?i=[].concat(n):(i=r.plainObjects?Object.create(null):{},a="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,s=parseInt(a,10),r.parseArrays||""!==a?!isNaN(s)&&l!==a&&String(s)===a&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(i=[])[s]=n:i[a]=n:i={0:n}),n=i}return n}(s,t,r)}}var o=r(1),i=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:o.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?a:e).charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:a).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:a).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:a).charsetSentinel,comma:("boolean"==typeof e.comma?e:a).comma,decoder:("function"==typeof e.decoder?e:a).decoder,delimiter:("string"==typeof e.delimiter||o.isRegExp(e.delimiter)?e:a).delimiter,depth:("number"==typeof e.depth?e:a).depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:a).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:a).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:a).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:a).strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){var r,n,s,l,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=(e=t.parameterLimit===1/0?void 0:t.parameterLimit,c.split(t.delimiter,e)),f=-1,p=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?p="utf-8":"utf8=%26%2310003%3B"===h[r]&&(p="iso-8859-1"),f=r,r=h.length);for(r=0;r<h.length;++r)r!==f&&((l=(l=-1===(l=-1===(l=(n=h[r]).indexOf("]="))?n.indexOf("="):l+1)?(s=t.decoder(n,a.decoder,p),t.strictNullHandling?null:""):(s=t.decoder(n.slice(0,l),a.decoder,p),t.decoder(n.slice(l+1),a.decoder,p)))&&t.interpretNumericEntities&&"iso-8859-1"===p?l.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))})):l)&&t.comma&&-1<l.indexOf(",")&&(l=l.split(",")),i.call(u,s)?u[s]=o.combine(u[s],l):u[s]=l);return u}(e,r):e,l=r.plainObjects?Object.create(null):{},u=Object.keys(s),c=0;c<u.length;++c){var h=n(h=u[c],s[h],r);l=o.merge(l,h,r)}return o.compact(l)}},function(e,t,r){var n=r(12);function o(e){for(var t,r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return String(t)}e.exports={purge:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Global";return function(t){t.app.get("cache_".concat(e)).reset()}},purgeId:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Global";return function(t){var r=t.app.get("cache_".concat(e));t.id&&(pathHash=o("".concat(t.path)),idHash=o("/".concat(t.id)),r.forEach((function(e,t,r){0===t.indexOf("".concat(pathHash,"_").concat(idHash,"_"))&&r.del(t)})))}},purgePath:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Global";return function(t){var r=t.app.get("cache_".concat(e));t.path&&(pathHash=o(t.path),r.forEach((function(e,t,r){0===t.indexOf("".concat(pathHash,"_"))&&r.del(t)})))}},getKey:function(e){e.params=e.params||{};var t=e.params.query||{},r=!1===e.params.paginate?"disabled":"enabled",i="pagination-hook:".concat(r,"::").concat(e.path);r="";return e.id&&(i+="/".concat(e.id),r=o("/".concat(e.id))),0<Object.keys(t).length&&(i+="?".concat(n.stringify(JSON.parse(JSON.stringify(t)),{encode:!1}))),"".concat(o(e.path),"_").concat(r,"_").concat(o(i))},hashCode:o}},function(e,t,r){"use strict";t.decode=t.parse=r(13),t.encode=t.stringify=r(14)},function(e,t,r){"use strict";e.exports=function(e,t,r,o){r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t=t||"&"),t=1e3,o&&"number"==typeof o.maxKeys&&(t=o.maxKeys);var s=e.length;0<t&&t<s&&(s=t);for(var l=0;l<s;++l){var u,c=0<=(c=(h=e[l].replace(a,"%20")).indexOf(r))?(u=h.substr(0,c),h.substr(c+1)):(u=h,""),h=decodeURIComponent(u);c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(i,h)?n(i[h])?i[h].push(c):i[h]=[i[h],c]:i[h]=c}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}e.exports=function(e,t,r,s){return t=t||"&",r=r||"=","object"==typeof(e=null===e?void 0:e)?i(a(e),(function(a){var s=encodeURIComponent(n(a))+r;return o(e[a])?i(e[a],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[a]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}}],r={},e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=4);function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t,r}));